<launch>
  <!-- YAMLファイルを読み込む -->
  <arg name="config_file" default="/home/sskr3/acm_ws/settings.yaml" />

  <!-- パラメータを読み込み -->
  <rosparam file="$(arg config_file)" command="load" />

  <!-- dynamixel -->
  <node pkg="dynamixel_control" type="multi_pos_ctrl_node" name="multi_pos_ctrl_node" output="screen">
    <param name="device_name"  value="$(param multi_pos_ctrl_node/device_name)" />
    <param name="baud_rate"    value="$(param multi_pos_ctrl_node/baud_rate)" />
    <param name="motor_count"  value="$(param multi_pos_ctrl_node/motor_count)" />
    <param name="freq"         value="$(param multi_pos_ctrl_node/freq)" />
    <remap from="/goal_positions"      to="$(param multi_pos_ctrl_node/goal_topic)" />
    <remap from="/present_positions"   to="$(param multi_pos_ctrl_node/pos_topic)" />
    <remap from="/present_currents"    to="$(param multi_pos_ctrl_node/cur_topic)" />
  </node>

  <!-- arduino -->
  <node pkg="serial_to_mag" type="serial_to_mag_node" name="serial_to_mag_node" output="screen">
    <param name="port" value="$(param serial_to_mag_node/port)" />
    <param name="baudrate" value="$(param serial_to_mag_node/baudrate)" />
  </node>

  <!-- mag calibration -->
  <node name="mag_calibration_node" pkg="calibration" type="mag_calibration_node" output="screen">
    <param name="csv_path" value="$(param mag_calibration_node/csv_path)" />
    <param name="mag_avg_count" value="$(param mag_calibration_node/mag_avg_count)" />
    <param name="mag_save_index" value="$(param mag_calibration_node/mag_save_index)" />
    <param name="motor_inverse" value="$(param mag_calibration_node/motor_inverse)" />
    <param name="save_dir" value="$(param mag_calibration_node/save_dir)" />
  </node>
</launch>
